# Core databases (required)
DATABASE_URL=
CONTROL_PLANE_DATABASE_URL=
DATABASE_SSL=true

# Database pool tuning (optional)
DB_POOL_MAX=20
DB_POOL_MIN=2
DB_POOL_IDLE_TIMEOUT_MS=30000
DB_POOL_CONN_TIMEOUT_MS=5000
CONTROL_DB_POOL_MAX=10
CONTROL_DB_POOL_IDLE_TIMEOUT_MS=30000
CONTROL_DB_POOL_CONN_TIMEOUT_MS=5000

# Firebase client (required for portal login)
NEXT_PUBLIC_FIREBASE_API_KEY=
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=
NEXT_PUBLIC_FIREBASE_PROJECT_ID=
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=
NEXT_PUBLIC_FIREBASE_APP_ID=
NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=

# Firebase admin (required for server-side token verification)
# Value can be raw JSON or base64-encoded JSON service account
FIREBASE_SERVICE_ACCOUNT_JSON=

# WhatsApp / Meta (required if using WhatsApp sync/send)
WHATSAPP_TOKEN_ENCRYPTION_KEY=
META_SYSTEM_USER_TOKEN=
META_APP_ID=
META_APP_SECRET=
META_GRAPH_API_VERSION=v24.0
META_EXTENDED_CREDIT_LINE_ID=
META_DEFAULT_WABA_CURRENCY=USD

# Optional client-side defaults for embedded signup (has hardcoded fallback if empty)
NEXT_PUBLIC_FB_APP_ID=
NEXT_PUBLIC_FB_EMBEDDED_SIGNUP_CONFIG_ID=

# OpenAI (required for RAG indexing/query features)
OPENAI_API_KEY=
OPENAI_CHAT_MODEL=gpt-4o-mini
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
# Legacy alias used in code
OPENAI_EMBED_MODEL=

# Pinecone (required for RAG retrieval)
PINECONE_API_KEY=
PINECONE_INDEX_NAME=

# Azure Blob Storage (required for file upload/indexing)
AZURE_BLOB_CONNECTION_STRING=
AZURE_BLOB_CONTAINER=uploads

# Azure Queue for RAG worker (optional if using DB polling mode)
AZURE_QUEUE_CONNECTION_STRING=
# Alias supported by code
AZURE_STORAGE_CONNECTION_STRING=
RAG_QUEUE_NAME=rag-jobs
RAG_QUEUE_VISIBILITY_TIMEOUT=120
RAG_WORKER_MODE=queue
RAG_WORKER_POLL_MS=1500

# Azure Web PubSub (required for live dashboard events)
WEB_PUBSUB_CONNECTION_STRING=
# Alias supported by code
WEB_PUBSUB_CONN=
WEB_PUBSUB_HUB=portal

# Azure Service Bus fanout hub (optional fallback/event bus)
SERVICE_BUS_CONN=
# Alias supported by code
SERVICEBUS_CONNECTION_STRING=
SERVICE_BUS_TOPIC_NAME=portal-events
SERVICE_BUS_SUBSCRIPTION_NAME=portal-dashboard
SERVICE_BUS_FANOUT_MODE=replica
# Usually provided by hosting environment
CONTAINER_APP_REPLICA_NAME=
HOSTNAME=

# Upload/rate-limit tuning (optional)
MAX_UPLOAD_BYTES=26214400
RATE_LIMIT_TRPC_MAX=300
RATE_LIMIT_TRPC_WINDOW_MS=60000
RATE_LIMIT_UPLOAD_DOCS_GET_MAX=120
RATE_LIMIT_UPLOAD_DOCS_GET_WINDOW_MS=60000
RATE_LIMIT_UPLOAD_DOCS_POST_MAX=20
RATE_LIMIT_UPLOAD_DOCS_POST_WINDOW_MS=60000
RATE_LIMIT_RAG_RETRAIN_MAX=10
RATE_LIMIT_RAG_RETRAIN_WINDOW_MS=60000
RATE_LIMIT_WHATSAPP_SYNC_MAX=10
RATE_LIMIT_WHATSAPP_SYNC_WINDOW_MS=60000
RATE_LIMIT_WHATSAPP_SEND_MAX=30
RATE_LIMIT_WHATSAPP_SEND_WINDOW_MS=60000

# RAG advanced tuning (optional)
RAG_EMBED_BATCH_SIZE=64
RAG_CONVO_BLOCK_MIN_CHARS=80
RAG_PRODUCT_CONTEXT_LINES=2
RAG_PRODUCT_VALIDATE_MODEL=gpt-4o-mini
RAG_PRODUCT_ALIAS_MODEL=gpt-4o-mini
RAG_PRODUCT_REPAIR_MODEL=gpt-4o-mini
RAG_PRODUCT_LIST_MODEL=gpt-4o-mini
RAG_PRODUCT_EXTRACT_MODEL=gpt-4o-mini
